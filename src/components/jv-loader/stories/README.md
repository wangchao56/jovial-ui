# JvLoader 加载器组件

## 1. 组件介绍
`JvLoader` 是一个用于显示加载状态的组件，在数据加载或操作进行时提供视觉反馈。它支持多种样式、尺寸和颜色，并可自定义加载文本和动画效果，适用于各种加载场景。

## 2. 布局结构使用方式
组件采用以下布局结构：
- 加载指示器：展示动画效果的视觉元素
- 加载文本（可选）：显示加载状态的描述文本

### 基本使用示例
```vue
<template>
  <!-- 基础加载器 -->
  <JvLoader />
  
  <!-- 带文本的加载器 -->
  <JvLoader text="加载中..." />
  
  <!-- 自定义样式的加载器 -->
  <JvLoader 
    type="spinner" 
    size="large" 
    color="#FF5722"
    text="请稍候" 
  />
  
  <!-- 全屏加载器 -->
  <JvLoader fullscreen />
</template>
```

## 3. 交互设计
组件提供以下交互效果：
- 动画效果：持续的动画提示用户操作正在进行
- 全屏遮罩：全屏模式下会阻止用户与页面其他元素交互
- 自动聚焦：全屏模式下会获取焦点，便于屏幕阅读器识别
- 颜色变化：可根据上下文调整颜色，表达不同状态

特殊交互：
- 当使用 fullscreen 属性时，组件会添加到 body 元素，并阻止页面滚动
- 点击全屏加载器背景不会关闭加载器，确保加载过程不被中断
- 可通过 v-model 动态控制加载器的显示和隐藏

## 4. 可访问性
组件遵循 WCAG 无障碍标准：
- 使用 `role="status"` 确保屏幕阅读器能识别加载状态
- 具有适当的 `aria-live="polite"` 属性，通知用户状态变化
- 全屏模式时使用 `aria-modal="true"` 和 `role="dialog"`
- 默认提供足够的颜色对比度
- 加载文本提供对视觉指示器的补充说明
- 键盘用户可通过 Tab 键导航到加载器

## 5. Vue 组件 API

### Props
| 属性名 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| type | 'spinner' \| 'dots' \| 'circle' \| 'bars' | 'spinner' | 加载器类型 |
| size | 'small' \| 'medium' \| 'large' \| 'xlarge' | 'medium' | 加载器尺寸 |
| color | string | 'currentColor' | 加载器颜色 |
| text | string | '' | 加载提示文本 |
| textPosition | 'top' \| 'right' \| 'bottom' \| 'left' | 'bottom' | 提示文本位置 |
| fullscreen | boolean | false | 是否全屏显示 |
| background | string | 'rgba(255, 255, 255, 0.9)' | 全屏模式背景颜色 |
| zIndex | number | 2000 | 全屏模式的 z-index 值 |
| modelValue | boolean | true | 是否显示加载器，支持 v-model |

### Emits
| 事件名 | 参数 | 说明 |
|--------|------|------|
| update:modelValue | (value: boolean) | 加载器显示状态变化时触发 |

### Slots
| 插槽名 | 说明 |
|--------|------|
| default | 自定义加载指示器内容 |
| text | 自定义文本内容 |

### Expose
| 方法名 | 参数 | 说明 |
|--------|------|------|
| show | - | 显示加载器 |
| hide | - | 隐藏加载器 |

## 6. 测试用例

### 基础功能测试
| 测试ID | 测试场景 | 测试描述 | 测试步骤 | 预期结果 | 测试状态 |
|--------|----------|----------|----------|----------|----------|
| LD-001 | 基础渲染 | 验证组件是否正确渲染 | 1. 引入组件<br>2. 在模板中使用组件 | 1. 组件成功渲染<br>2. 包含正确的类名 | ✅ |
| LD-002 | 不同类型 | 验证不同类型的加载器 | 1. 设置不同的 type 属性<br>2. 检查渲染结果 | 正确渲染对应类型的加载器 | ✅ |

### Props 功能测试
| 测试ID | 测试场景 | 测试描述 | 测试步骤 | 预期结果 | 测试状态 |
|--------|----------|----------|----------|----------|----------|
| LD-101 | 尺寸变化 | 验证不同尺寸效果 | 1. 设置不同的 size 属性<br>2. 检查样式变化 | 加载器尺寸与设置匹配 | ✅ |
| LD-102 | 颜色设置 | 验证自定义颜色 | 1. 设置 color 属性<br>2. 检查样式变化 | 加载器颜色与设置匹配 | ✅ |
| LD-103 | 文本显示 | 验证加载文本显示 | 1. 设置 text 属性<br>2. 检查文本内容 | 正确显示加载文本 | ✅ |
| LD-104 | 文本位置 | 验证文本位置设置 | 1. 设置不同的 textPosition 属性<br>2. 检查文本位置 | 文本位置与设置匹配 | ✅ |
| LD-105 | 全屏模式 | 验证全屏显示效果 | 1. 设置 fullscreen 属性<br>2. 检查渲染结果 | 加载器全屏显示并阻止页面滚动 | ✅ |
| LD-106 | 背景设置 | 验证全屏背景设置 | 1. 设置 background 属性<br>2. 检查背景样式 | 背景颜色与设置匹配 | ✅ |
| LD-107 | Z轴层级 | 验证 z-index 设置 | 1. 设置 zIndex 属性<br>2. 检查样式变化 | z-index 值与设置匹配 | ✅ |
| LD-108 | 显示控制 | 验证 modelValue 控制显示 | 1. 设置 modelValue 为 false<br>2. 检查组件是否隐藏 | 组件根据 modelValue 显示或隐藏 | ✅ |

### Emits 事件测试
| 测试ID | 测试场景 | 测试描述 | 测试步骤 | 预期结果 | 测试状态 |
|--------|----------|----------|----------|----------|----------|
| LD-201 | 状态更新 | 验证 update:modelValue 事件 | 1. 监听事件<br>2. 调用 show/hide 方法 | 事件被触发且值正确 | ✅ |

### Slots 插槽测试
| 测试ID | 测试场景 | 测试描述 | 测试步骤 | 预期结果 | 测试状态 |
|--------|----------|----------|----------|----------|----------|
| LD-301 | 默认插槽 | 验证自定义指示器 | 1. 设置默认插槽内容<br>2. 检查渲染结果 | 正确显示自定义内容 | ✅ |
| LD-302 | 文本插槽 | 验证自定义文本 | 1. 设置 text 插槽内容<br>2. 检查渲染结果 | 正确显示自定义文本 | ✅ |

### Expose API 测试
| 测试ID | 测试场景 | 测试描述 | 测试步骤 | 预期结果 | 测试状态 |
|--------|----------|----------|----------|----------|----------|
| LD-401 | 显示方法 | 验证 show 方法 | 1. 调用 show 方法<br>2. 检查组件是否显示 | 组件显示并触发更新事件 | ✅ |
| LD-402 | 隐藏方法 | 验证 hide 方法 | 1. 调用 hide 方法<br>2. 检查组件是否隐藏 | 组件隐藏并触发更新事件 | ✅ |

### 样式测试
| 测试ID | 测试场景 | 测试描述 | 测试步骤 | 预期结果 | 测试状态 |
|--------|----------|----------|----------|----------|----------|
| LD-501 | 动画效果 | 验证加载动画效果 | 1. 渲染不同类型的加载器<br>2. 观察动画效果 | 加载器显示流畅的动画效果 | ✅ |
| LD-502 | 响应式布局 | 验证在不同尺寸下的表现 | 1. 在不同宽度的容器中使用组件<br>2. 观察组件布局 | 组件布局适应不同容器尺寸 | ✅ |

### 可访问性测试
| 测试ID | 测试场景 | 测试描述 | 测试步骤 | 预期结果 | 测试状态 |
|--------|----------|----------|----------|----------|----------|
| LD-601 | ARIA属性 | 验证无障碍属性设置 | 1. 检查组件的 ARIA 属性<br>2. 验证角色和状态 | 包含正确的 role 和 aria-live 属性 | ✅ |
| LD-602 | 键盘交互 | 验证键盘可访问性 | 1. 使用 Tab 键导航<br>2. 检查焦点行为 | 组件可以通过键盘访问和操作 | ✅ |

## 使用示例

### 基础用法
```vue
<template>
  <JvLoader />
</template>
```

### 不同类型的加载器
```vue
<template>
  <JvLoader type="spinner" />
  <JvLoader type="dots" />
  <JvLoader type="circle" />
  <JvLoader type="bars" />
</template>
```

### 带文本的加载器
```vue
<template>
  <JvLoader text="正在加载数据..." />
</template>
```

### 自定义颜色和尺寸
```vue
<template>
  <JvLoader color="#FF5722" size="large" />
</template>
```

### 全屏加载
```vue
<template>
  <button @click="loading = true">显示全屏加载</button>
  <JvLoader v-model="loading" fullscreen text="处理中，请稍候..." />
</template>

<script setup>
import { ref } from 'vue'

const loading = ref(false)
</script>
```

### 使用插槽自定义内容
```vue
<template>
  <JvLoader>
    <template #default>
      <div class="custom-loader">自定义加载动画</div>
    </template>
    <template #text>
      <div class="custom-text">
        <span>加载中</span>
        <span class="dots">...</span>
      </div>
    </template>
  </JvLoader>
</template>
```
